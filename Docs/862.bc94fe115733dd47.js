"use strict";(self.webpackChunksakai=self.webpackChunksakai||[]).push([[862],{862:(V,f,o)=>{o.r(f),o.d(f,{IncidentDashboardModule:()=>K});var d=o(9808),_=o(2382),h=o(464),Z=o(1874),u=o(5163),b=o(845),T=o(3986),x=o(6208),y=o(5712),e=o(1223),A=o(4584),U=o(6122),w=o(8568),q=o(9783);function C(t,s){if(1&t&&e._UZ(0,"span",3),2&t){const n=e.oxw();e.Q6J("ngClass",n.icon)}}const S=["*"];let D=(()=>{class t{containerClass(){return{"p-tag p-component":!0,"p-tag-info":"info"===this.severity,"p-tag-success":"success"===this.severity,"p-tag-warning":"warning"===this.severity,"p-tag-danger":"danger"===this.severity,"p-tag-rounded":this.rounded}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["p-tag"]],hostAttrs:[1,"p-element"],inputs:{styleClass:"styleClass",style:"style",severity:"severity",value:"value",icon:"icon",rounded:"rounded"},ngContentSelectors:S,decls:5,vars:6,consts:[[3,"ngClass","ngStyle"],["class","p-tag-icon",3,"ngClass",4,"ngIf"],[1,"p-tag-value"],[1,"p-tag-icon",3,"ngClass"]],template:function(n,i){1&n&&(e.F$t(),e.TgZ(0,"span",0),e.Hsn(1),e.YNc(2,C,1,1,"span",1),e.TgZ(3,"span",2),e._uU(4),e.qZA()()),2&n&&(e.Tol(i.styleClass),e.Q6J("ngClass",i.containerClass())("ngStyle",i.style),e.xp6(2),e.Q6J("ngIf",i.icon),e.xp6(2),e.Oqu(i.value))},dependencies:[d.mk,d.O5,d.PC],styles:[".p-tag{display:inline-flex;align-items:center;justify-content:center}.p-tag-icon,.p-tag-value,.p-tag-icon.pi{line-height:1.5}.p-tag.p-tag-rounded{border-radius:10rem}\n"],encapsulation:2,changeDetection:0}),t})(),M=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[d.ez]}),t})();function I(t,s){1&t&&(e.TgZ(0,"tr")(1,"th",61),e._uU(2,"Incident # "),e._UZ(3,"p-sortIcon",62),e.qZA(),e.TgZ(4,"th",63),e._uU(5,"Name "),e._UZ(6,"p-sortIcon",64),e.qZA(),e.TgZ(7,"th",65),e._uU(8,"Status "),e._UZ(9,"p-sortIcon",66),e.qZA(),e._UZ(10,"th"),e.qZA())}function k(t,s){if(1&t&&(e.TgZ(0,"tr")(1,"td",67),e._uU(2),e.qZA(),e.TgZ(3,"td",68),e._uU(4),e.qZA(),e.TgZ(5,"td")(6,"p-tag"),e._uU(7," Reported "),e.qZA()(),e.TgZ(8,"td"),e._uU(9,"Assign"),e.qZA()()),2&t){const n=s.$implicit;e.xp6(2),e.Oqu(n.RowKey),e.xp6(2),e.Oqu(n.natureOfIncident)}}const g=function(){return{width:"2.5rem",height:"2.5rem"}},c=function(){return{height:"8px"}},J=function(){return{width:"50%"}},O=function(){return{width:"16%"}},j=function(){return{width:"67%"}},Q=function(){return{width:"35%"}},F=function(){return{width:"75%"}},P=function(){return{width:"40%"}};let R=(()=>{class t{constructor(n,i,a){this.incidentReportService=n,this.productService=i,this.layoutService=a,this.subscription=this.layoutService.configUpdate$.subscribe(()=>{this.initChart()})}ngOnInit(){this.initChart(),this.productService.getProductsSmall().then(n=>this.products=n),this.incidentReportService.getIncidentsFromAPI().subscribe(n=>{this.recentIncidents=n},n=>{console.error("Error reporting incident:",n),alert("Error reporting incident!")}),this.items=[{label:"Add New",icon:"pi pi-fw pi-plus"},{label:"Remove",icon:"pi pi-fw pi-minus"}]}processIncidents(n,i,a){const l=new Date,p=Math.floor((l.getTime()-a.getTime())/6048e5),v=n.filter(m=>m.natureOfIncident===i);return{howmanyweeks_now_since_timestamp:p,count_of_incidents_after_timestamp:v.filter(m=>m.timestamp&&m.timestamp>a).length,total_count_of_incidents_for_this_incidentType:v.length}}initBarChart(n){const i=getComputedStyle(document.documentElement),a=i.getPropertyValue("--text-color"),l=i.getPropertyValue("--text-color-secondary"),r=i.getPropertyValue("--surface-border");this.basicData={labels:["January","February","March","April","May","June","July","August","September","October"],datasets:[{label:"Theft Under $5000",backgroundColor:"#42A5F5",data:[65,59,80,81,56,55,40,56,55,40]},{label:"Theft Above $5000",backgroundColor:"#FFA726",data:[28,48,40,19,86,27,90,56,55,40]}]},this.basicOptions={plugins:{legend:{labels:{color:a}}},scales:{x:{ticks:{color:l},grid:{color:r,drawBorder:!1}},y:{ticks:{color:l},grid:{color:r,drawBorder:!1}}}}}initChart(){this.incidentReportService.getIncidentsFromAPI().subscribe(r=>{this.robberyCard=this.processIncidents(r,"Robbery",new Date("2024-07-12T09:30:00Z")),this.shopliftingCard=this.processIncidents(r,"Shoplifting",new Date("2024-07-12T09:30:00Z")),this.theftUnderFiveK=this.processIncidents(r,"Theft Under $5,000",new Date("2024-07-12T09:30:00Z")),this.theftOverFiveK=this.processIncidents(r,"Theft Over $5,000",new Date("2024-07-12T09:30:00Z")),this.initBarChart(r)},r=>{console.error("Error reporting incident:",r),alert("Error reporting incident!")});const n=getComputedStyle(document.documentElement),i=n.getPropertyValue("--text-color"),a=n.getPropertyValue("--text-color-secondary"),l=n.getPropertyValue("--surface-border");this.chartData={labels:["January","February","March","April","May","June","July"],datasets:[{label:"First Dataset",data:[65,59,80,81,56,55,40],fill:!1,backgroundColor:n.getPropertyValue("--bluegray-700"),borderColor:n.getPropertyValue("--bluegray-700"),tension:.4},{label:"Second Dataset",data:[28,48,40,19,86,27,90],fill:!1,backgroundColor:n.getPropertyValue("--green-600"),borderColor:n.getPropertyValue("--green-600"),tension:.4}]},this.chartOptions={plugins:{legend:{labels:{color:i}}},scales:{x:{ticks:{color:a},grid:{color:l,drawBorder:!1}},y:{ticks:{color:a},grid:{color:l,drawBorder:!1}}}}}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(A.M),e.Y36(U.M),e.Y36(w.P))},t.\u0275cmp=e.Xpm({type:t,selectors:[["ng-component"]],decls:178,vars:53,consts:[[1,"grid"],[1,"col-12","lg:col-6","xl:col-3"],[1,"card","mb-0"],[1,"flex","justify-content-between","mb-3"],[1,"block","text-500","font-medium","mb-3"],[1,"text-900","font-medium","text-xl"],[1,"flex","align-items-center","justify-content-center","bg-blue-100","border-round",3,"ngStyle"],[1,"pi","robbery-icon","text-blue-500","text-xl"],[1,"text-green-500","font-medium"],[1,"text-500"],[1,"flex","align-items-center","justify-content-center","bg-orange-100","border-round",3,"ngStyle"],[1,"pi","shoplifting-icon","text-orange-500","text-xl"],[1,"flex","align-items-center","justify-content-center","bg-cyan-100","border-round",3,"ngStyle"],[1,"pi","theftUnder5k-icon","text-cyan-500","text-xl"],[1,"flex","align-items-center","justify-content-center","bg-purple-100","border-round",3,"ngStyle"],[1,"pi","theftAbove5k-icon","text-purple-500","text-xl"],[1,"col-12","xl:col-6"],[1,"card"],["responsiveLayout","scroll",3,"value","paginator","rows"],["pTemplate","header"],["pTemplate","body"],[1,"flex","justify-content-between","align-items-center","mb-5"],["pButton","","type","button","icon","pi pi-ellipsis-v",1,"p-button-rounded","p-button-text","p-button-plain",3,"click"],[3,"popup","model"],["menu",""],[1,"list-none","p-0","m-0"],[1,"flex","flex-column","md:flex-row","md:align-items-center","md:justify-content-between","mb-4"],[1,"text-900","font-medium","mr-2","mb-1","md:mb-0"],[1,"mt-2","md:mt-0","flex","align-items-center"],[1,"surface-300","border-round","overflow-hidden","w-10rem","lg:w-6rem",3,"ngStyle"],[1,"bg-orange-500","h-full",3,"ngStyle"],[1,"text-orange-500","ml-3","font-medium"],[1,"mt-2","md:mt-0","ml-0","md:ml-8","flex","align-items-center"],[1,"bg-cyan-500","h-full",3,"ngStyle"],[1,"text-cyan-500","ml-3","font-medium"],[1,"bg-pink-500","h-full",3,"ngStyle"],[1,"text-pink-500","ml-3","font-medium"],[1,"bg-green-500","h-full",3,"ngStyle"],[1,"text-green-500","ml-3","font-medium"],[1,"bg-purple-500","h-full",3,"ngStyle"],[1,"text-purple-500","ml-3","font-medium"],[1,"bg-teal-500","h-full",3,"ngStyle"],[1,"text-teal-500","ml-3","font-medium"],["type","bar",3,"data","options"],[1,"flex","align-items-center","justify-content-between","mb-4"],[1,"block","text-600","font-medium","mb-3"],[1,"p-0","mx-0","mt-0","mb-4","list-none"],[1,"flex","align-items-center","py-2","border-bottom-1","surface-border"],[1,"w-3rem","h-3rem","flex","align-items-center","justify-content-center","bg-blue-100","border-circle","mr-3","flex-shrink-0"],[1,"pi","pi-dollar","text-xl","text-blue-500"],[1,"text-900","line-height-3"],[1,"text-700"],[1,"text-blue-500"],[1,"flex","align-items-center","py-2"],[1,"w-3rem","h-3rem","flex","align-items-center","justify-content-center","bg-orange-100","border-circle","mr-3","flex-shrink-0"],[1,"pi","pi-download","text-xl","text-orange-500"],[1,"text-700","line-height-3"],[1,"text-blue-500","font-medium"],[1,"p-0","m-0","list-none"],[1,"w-3rem","h-3rem","flex","align-items-center","justify-content-center","bg-pink-100","border-circle","mr-3","flex-shrink-0"],[1,"pi","pi-question","text-xl","text-pink-500"],["pSortableColumn","RowKey"],["field","RowKey"],["pSortableColumn","natureOfIncident"],["field","name"],["pSortableColumn","status"],["field","status"],[2,"width","35%","min-width","7rem"],[2,"width","35%","min-width","8rem"]],template:function(n,i){if(1&n){const a=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"span",4),e._uU(6,"Robbery"),e.qZA(),e.TgZ(7,"div",5),e._uU(8),e.qZA()(),e.TgZ(9,"div",6),e._UZ(10,"i",7),e.qZA()(),e.TgZ(11,"span",8),e._uU(12),e.qZA(),e.TgZ(13,"span",9),e._uU(14),e.qZA()()(),e.TgZ(15,"div",1)(16,"div",2)(17,"div",3)(18,"div")(19,"span",4),e._uU(20,"Shoplifting"),e.qZA(),e.TgZ(21,"div",5),e._uU(22),e.qZA()(),e.TgZ(23,"div",10),e._UZ(24,"i",11),e.qZA()(),e.TgZ(25,"span",8),e._uU(26),e.qZA(),e.TgZ(27,"span",9),e._uU(28),e.qZA()()(),e.TgZ(29,"div",1)(30,"div",2)(31,"div",3)(32,"div")(33,"span",4),e._uU(34,"Theft Under $5,000"),e.qZA(),e.TgZ(35,"div",5),e._uU(36),e.qZA()(),e.TgZ(37,"div",12),e._UZ(38,"i",13),e.qZA()(),e.TgZ(39,"span",8),e._uU(40),e.qZA(),e.TgZ(41,"span",9),e._uU(42),e.qZA()()(),e.TgZ(43,"div",1)(44,"div",2)(45,"div",3)(46,"div")(47,"span",4),e._uU(48,"Theft Over $5,000"),e.qZA(),e.TgZ(49,"div",5),e._uU(50),e.qZA()(),e.TgZ(51,"div",14),e._UZ(52,"i",15),e.qZA()(),e.TgZ(53,"span",8),e._uU(54),e.qZA(),e.TgZ(55,"span",9),e._uU(56),e.qZA()()(),e.TgZ(57,"div",16)(58,"div",17)(59,"h5"),e._uU(60,"Recent Incidents"),e.qZA(),e.TgZ(61,"p-table",18),e.YNc(62,I,11,0,"ng-template",19),e.YNc(63,k,10,2,"ng-template",20),e.qZA()(),e.TgZ(64,"div",17)(65,"div",21)(66,"h5"),e._uU(67,"Resolved Incidents This Year"),e.qZA(),e.TgZ(68,"div")(69,"button",22),e.NdJ("click",function(r){e.CHM(a);const p=e.MAs(71);return e.KtG(p.toggle(r))}),e.qZA(),e._UZ(70,"p-menu",23,24),e.qZA()(),e.TgZ(72,"ul",25)(73,"li",26)(74,"div")(75,"span",27),e._uU(76,"Robbery"),e.qZA()(),e.TgZ(77,"div",28)(78,"div",29),e._UZ(79,"div",30),e.qZA(),e.TgZ(80,"span",31),e._uU(81,"%50"),e.qZA()()(),e.TgZ(82,"li",26)(83,"div")(84,"span",27),e._uU(85,"Commercial Break and Enter"),e.qZA()(),e.TgZ(86,"div",32)(87,"div",29),e._UZ(88,"div",33),e.qZA(),e.TgZ(89,"span",34),e._uU(90,"%16"),e.qZA()()(),e.TgZ(91,"li",26)(92,"div")(93,"span",27),e._uU(94,"Shoplifting"),e.qZA()(),e.TgZ(95,"div",32)(96,"div",29),e._UZ(97,"div",35),e.qZA(),e.TgZ(98,"span",36),e._uU(99,"%67"),e.qZA()()(),e.TgZ(100,"li",26)(101,"div")(102,"span",27),e._uU(103,"Theft Under $5,000"),e.qZA()(),e.TgZ(104,"div",32)(105,"div",29),e._UZ(106,"div",37),e.qZA(),e.TgZ(107,"span",38),e._uU(108,"%35"),e.qZA()()(),e.TgZ(109,"li",26)(110,"div")(111,"span",27),e._uU(112,"Theft Above $5,000"),e.qZA()(),e.TgZ(113,"div",32)(114,"div",29),e._UZ(115,"div",39),e.qZA(),e.TgZ(116,"span",40),e._uU(117,"%75"),e.qZA()()(),e.TgZ(118,"li",26)(119,"div")(120,"span",27),e._uU(121,"Organized Retail Crime"),e.qZA()(),e.TgZ(122,"div",32)(123,"div",29),e._UZ(124,"div",41),e.qZA(),e.TgZ(125,"span",42),e._uU(126,"%40"),e.qZA()()()()()(),e.TgZ(127,"div",16)(128,"div",17)(129,"h5"),e._uU(130,"Thefts Reported by Month"),e.qZA(),e._UZ(131,"p-chart",43),e.qZA(),e.TgZ(132,"div",17)(133,"div",44)(134,"h5"),e._uU(135,"Notifications"),e.qZA(),e.TgZ(136,"div")(137,"button",22),e.NdJ("click",function(r){e.CHM(a);const p=e.MAs(71);return e.KtG(p.toggle(r))}),e.qZA(),e._UZ(138,"p-menu",23,24),e.qZA()(),e.TgZ(140,"span",45),e._uU(141,"TODAY"),e.qZA(),e.TgZ(142,"ul",46)(143,"li",47)(144,"div",48),e._UZ(145,"i",49),e.qZA(),e.TgZ(146,"span",50),e._uU(147,"Richard Jones "),e.TgZ(148,"span",51),e._uU(149," has reported a robbery incident in "),e.TgZ(150,"span",52),e._uU(151,"Baddeck"),e.qZA()()()(),e.TgZ(152,"li",53)(153,"div",54),e._UZ(154,"i",55),e.qZA(),e.TgZ(155,"span",56),e._uU(156,"Michael Dockery reported a theft of"),e.TgZ(157,"span",57),e._uU(158," $2500."),e.qZA()()()(),e.TgZ(159,"span",45),e._uU(160,"YESTERDAY"),e.qZA(),e.TgZ(161,"ul",58)(162,"li",47)(163,"div",48),e._UZ(164,"i",49),e.qZA(),e.TgZ(165,"span",50),e._uU(166,"Keyser Wick "),e.TgZ(167,"span",51),e._uU(168," has reported a robbery incident in "),e.TgZ(169,"span",52),e._uU(170,"Lunenburg"),e.qZA()()()(),e.TgZ(171,"li",47)(172,"div",59),e._UZ(173,"i",60),e.qZA(),e.TgZ(174,"span",50),e._uU(175,"Jane Davis"),e.TgZ(176,"span",51),e._uU(177," has posted a Shoplifting report."),e.qZA()()()()()()()}2&n&&(e.xp6(8),e.Oqu(i.robberyCard.total_count_of_incidents_for_this_incidentType),e.xp6(1),e.Q6J("ngStyle",e.DdM(37,g)),e.xp6(3),e.hij("",i.robberyCard.count_of_incidents_after_timestamp," new "),e.xp6(2),e.hij("since last ",i.robberyCard.howmanyweeks_now_since_timestamp," weeks"),e.xp6(8),e.Oqu(i.shopliftingCard.total_count_of_incidents_for_this_incidentType),e.xp6(1),e.Q6J("ngStyle",e.DdM(38,g)),e.xp6(3),e.hij("",i.shopliftingCard.count_of_incidents_after_timestamp," new"),e.xp6(2),e.hij("since last ",i.shopliftingCard.howmanyweeks_now_since_timestamp," weeks"),e.xp6(8),e.Oqu(i.theftUnderFiveK.total_count_of_incidents_for_this_incidentType),e.xp6(1),e.Q6J("ngStyle",e.DdM(39,g)),e.xp6(3),e.hij("",i.theftUnderFiveK.count_of_incidents_after_timestamp," new"),e.xp6(2),e.hij("since last ",i.theftUnderFiveK.howmanyweeks_now_since_timestamp," weeks"),e.xp6(8),e.Oqu(i.theftOverFiveK.total_count_of_incidents_for_this_incidentType),e.xp6(1),e.Q6J("ngStyle",e.DdM(40,g)),e.xp6(3),e.hij("",i.theftOverFiveK.count_of_incidents_after_timestamp," new "),e.xp6(2),e.hij("since last ",i.theftOverFiveK.howmanyweeks_now_since_timestamp," weeks"),e.xp6(5),e.Q6J("value",i.recentIncidents)("paginator",!0)("rows",5),e.xp6(9),e.Q6J("popup",!0)("model",i.items),e.xp6(8),e.Q6J("ngStyle",e.DdM(41,c)),e.xp6(1),e.Q6J("ngStyle",e.DdM(42,J)),e.xp6(8),e.Q6J("ngStyle",e.DdM(43,c)),e.xp6(1),e.Q6J("ngStyle",e.DdM(44,O)),e.xp6(8),e.Q6J("ngStyle",e.DdM(45,c)),e.xp6(1),e.Q6J("ngStyle",e.DdM(46,j)),e.xp6(8),e.Q6J("ngStyle",e.DdM(47,c)),e.xp6(1),e.Q6J("ngStyle",e.DdM(48,Q)),e.xp6(8),e.Q6J("ngStyle",e.DdM(49,c)),e.xp6(1),e.Q6J("ngStyle",e.DdM(50,F)),e.xp6(8),e.Q6J("ngStyle",e.DdM(51,c)),e.xp6(1),e.Q6J("ngStyle",e.DdM(52,P)),e.xp6(7),e.Q6J("data",i.basicData)("options",i.basicOptions),e.xp6(7),e.Q6J("popup",!0)("model",i.items))},dependencies:[d.PC,h.C,Z.v2,u.iA,q.jx,u.lQ,u.fz,b.Hq,D],styles:[".robbery-icon[_ngcontent-%COMP%]{background-image:url(robbery.5b2be301011d51a4.png);width:25px;height:25px}.shoplifting-icon[_ngcontent-%COMP%]{background-image:url(shoplifting.5447903b4f10eeea.png);width:25px;height:25px}.theftUnder5k-icon[_ngcontent-%COMP%]{background-image:url(theftUnder5k.e0f1229b2ed9fde9.png);width:25px;height:15px}.theftAbove5k-icon[_ngcontent-%COMP%]{background-image:url(theftAbove5k.8c91aed2b1b319df.png);width:25px;height:18px}"]}),t})(),B=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[y.Bz.forChild([{path:"",component:R}]),y.Bz]}),t})(),K=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[d.ez,_.u5,h.S,Z.$9,u.U$,T.l,x.ml,b.hJ,B,M]}),t})()}}]);